<%@page import="java.io.*"%><%@page import="java.net.*"%><%@page import="org.json.*"%><%@ page language="java" contentType="text/html; charset=utf-8"	pageEncoding="utf-8"%><%final String appId = "wxf52e84a8849e28d6"; final String appSecret = "da8b45700cc6ba0f6347d765f893553d"; //自己的APPIP 和APPSECRET%><%class TestGetPost{public String getAccess_token(){ // 获得ACCESS_TOKEN	String url = "https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid="+ appId + "&secret=" +appSecret;		String accessToken = null;	try {		URL urlGet = new URL(url);		HttpURLConnection http = (HttpURLConnection) urlGet.openConnection(); 				http.setRequestMethod("GET"); //必须是get方式请求 		http.setRequestProperty("Content-Type","application/x-www-form-urlencoded"); 		http.setDoOutput(true); 		http.setDoInput(true);		System.setProperty("sun.net.client.defaultConnectTimeout", "30000");//连接超时30秒		System.setProperty("sun.net.client.defaultReadTimeout", "30000"); //读取超时30秒				http.connect();				InputStream is =http.getInputStream();		int size =is.available();		byte[] jsonBytes =new byte[size];		is.read(jsonBytes);		String message=new String(jsonBytes,"UTF-8");				JSONObject demoJson = new JSONObject(message);		accessToken = demoJson.getString("access_token");				System.out.println(message);	} catch (Exception e) {		e.printStackTrace();	}	return accessToken;}public int createMenu() throws IOException {	String user_define_menu = "{\"button\":["+			"{\"name\":\"程氏针灸\",\"sub_button\":["+					 "{\"type\":\"view\",\"name\":\"我们是谁\",\"url\":\"http://123.57.222.229/weixin/pages/1_1.jsp\"},"+					" {\"type\":\"view\",\"name\":\"品牌故事\",\"url\":\"http://123.57.222.229/weixin/pages/1_2.jsp\"},"+					" {\"type\":\"view\",\"name\":\"程氏在海外\",\"url\":\"http://123.57.222.229/weixin/pages/1_3.jsp\"}"+			"]},"+			"{\"name\":\"课程直通车\",\"sub_button\":["+					"{\"type\":\"view\",\"name\":\"海外发展\",\"url\":\"http://123.57.222.229/weixin/pages/2_1.jsp\"},"+					 "{\"type\":\"view\",\"name\":\"政策法规\",\"url\":\"http://123.57.222.229/weixin/pages/2_2.jsp\"},"+					 "{\"type\":\"view\",\"name\":\"专业英语\",\"url\":\"http://m.tingroom.com\"}"+			"]},"+			"{\"name\":\"我是会员\",\"sub_button\":["+					 "{\"type\":\"view\",\"name\":\"新手指南\",\"url\":\"http://123.57.222.229/weixin/pages/3_1.jsp\"},"+					 "{\"type\":\"view\",\"name\":\"PK排行榜\",\"url\":\"http://123.57.222.229/weixin/pages/3_2.jsp\"},"+					 "{\"type\":\"view\",\"name\":\"积分商城\",\"url\":\"http://123.57.222.229/weixin/pages/3_3.jsp\"},"+					 "{\"type\":\"view\",\"name\":\"文章搜索\",\"url\":\"http://123.57.222.229/weixin/pages/3_4.jsp\"},"+					 "{\"type\":\"view\",\"name\":\"历史列表\",\"url\":\"http://123.57.222.229/weixin/pages/3_5.jsp\"}"+			"]}"+		"]}";	//此处改为自己想要的结构体，替换即可	String access_token= getAccess_token();	String action = "https://api.weixin.qq.com/cgi-bin/menu/create?access_token="+access_token;	try {		URL url = new URL(action);		HttpURLConnection http = (HttpURLConnection) url.openConnection(); 				http.setRequestMethod("POST"); 		http.setRequestProperty("Content-Type","application/x-www-form-urlencoded"); 		http.setDoOutput(true); 		http.setDoInput(true);		System.setProperty("sun.net.client.defaultConnectTimeout", "30000");//连接超时30秒		System.setProperty("sun.net.client.defaultReadTimeout", "30000"); //读取超时30秒				http.connect();		OutputStream os= http.getOutputStream(); 		os.write(user_define_menu.getBytes("UTF-8"));//传入参数 		os.flush();		os.close();				InputStream is =http.getInputStream();		int size =is.available();		byte[] jsonBytes =new byte[size];		is.read(jsonBytes);		String message=new String(jsonBytes,"UTF-8");		System.out.println(message);	} catch (MalformedURLException e) {		e.printStackTrace();	} catch (IOException e) {		e.printStackTrace();	} 	return 0;}}%><%TestGetPost tgp = new TestGetPost();tgp.createMenu();%>